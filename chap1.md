## CORS와 SOP

---

> CORS(Cross-Origin Resource Sharing). <br/>
> 교차 출처 자원 공유 <br/>
> 한 출처에서 실행 중인 웹 애플리케이션이 다른 출처의 선택한 자원에 접근 할 수 있는 권한을 부여하도록 브라우저에 알려주는 체제

### 출처(Origin)

- protocol, host, port를 출처라고 한다.
- 두개의 출처를 비교하는 방법은 URL의 구성요소 세가지가 동일한지 확인한다.
- explorer같은 경우에는 포트자체를 무시한다.

ex)
```
https://www.example.com:8080

https://www.example.com:8080/user---(o)
http://www.example.com--------------(x)
https://www.example.com:8081--------(x)
```

### 동일 출처 정책(SOP)이 필요한 이유

출처가 다른 두 어플리케이션이 자유롭게 소통할 수 있는 환경은 위험한 환경이다.<br/>

정책이 없을경우 발생하는 문제는 다음과 같다.
  - CSRF(Cross-Site Request Forgery)
    - 인터넷 사용자의 의지와는 상관없이 공격자가 의도한 행위를 특정 웹사이트에 요청하게 만드는 공격
  - XSS(Cross-Site Scripting)
    - 악의적인 사용자가 공격하려는 사이트에 스크립트를 넣는 공격

따라서 이러한 악의적인 경우를 방지하기 위해 SOP정책으로 동일하지 않는 다른 출처의 스크립트가 실행되지 않도록 브라우저에서 사전에 방지하는 것이다.


<b>출처 비교와 차단은 브라우저가 한다.</b>

그런데 위와같이 모든 리소스요청을 다 차단하면 다른 도메인간의 상호작용을 할 수 없기 때문에 `CORS`를 사용하여 다른 출처의 리소스를 허용할것인지 비허용할 것인지 정할 수 있다.
